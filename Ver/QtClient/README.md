# Обработка запросов клиента

Запросы бывают двух типов:

1. **GET-запросы** с целью получения актуальных данных
2. **POST-запросы** для внесения изменений на сервере

Посылки сервера так же бывают двух типов:

1. **Ответ** — посылается только сессии-источнику первоначального запроса
2. **Уведомление** — посылается во все открытые принимающие сессии пользователя

На сервере у корзины и у каждого заказа должен быть timestamp — время последнего изменения с точки зрения сервера

# Обрабатываем 3 сценария:

1. **Запрос данных**
   - Клиент посылает GET-запрос.
   - Сервер присылает ответ.
2. **Изменение данных**
   - Клиент посылает POST-запрос.
   - Сервер обрабатывает запрос и присылает ответ содержащий итог обработки (успех/неуспех) и timestamp, который был присвоен этому изменению.
   - В случае успеха сервер также посылает пользователю уведомление с информацией о том, какие данные изменились, и timestamp-ом изменения.
   - Все клиенты, получившие уведомление, сравнивают timestamp изменения с timestamp-ом имеющихся данных и в случае несоответствия отправляют соответствующие GET-запросы.
   - Сервер рассылает ответы на полученные GET-запросы.
3. **Регистрация/авторизация**
    - Клиент посылает POST-запрос с данными для регистрации/авторизации.
    - Сервер обрабатывает запрос, присылает ответ с итогом обработки запроса.
    - В случае успеха формат ответа должен совпадать с форматом ответа на запрос `sign_in`.
    - ОПЦИОНАЛЬНО: сервер посылает пользователю уведомление о новом входе/попытке входа в аккаунт.

Форматы ответов (п. 1) в файле [AnswerFormat.md](https://github.com/Goshabur/RestaurantBES/blob/main/Ver/QtClient/AnswerFormat.md)

Форматы уведомлений (п. 2) в файле [NotificationFormat.md](https://github.com/Goshabur/RestaurantBES/blob/main/Ver/QtClient/NotificationFormat.md)

# Запросы клиента

1. **GET-запросы**
   - `get_menu`
      - resource: /menu
   - `get_order`
      - resource: /order
   - `get_cart`
      - resource: /cart
2. **POST-запросы**
   - `set_item_count`
      - resource: /cart
   - `set_cart`
      - resource: /cart
   - `create_order`
      - resource: /order
   - `sign_in`
      - resource: /user
   - `sign_up`
      - resource: /user
